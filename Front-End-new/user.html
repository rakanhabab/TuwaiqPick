<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุฏูุงู ููุฌูู - ููุญุฉ ุงููุณุชุฎุฏู</title>
  <meta name="description" content="ููุญุฉ ุชุญูู ุงููุณุชุฎุฏู - ุฏูุงู ููุฌูู" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin defer></script>
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/user.css">
</head>
<body>
  <!-- User Dashboard -->
  <div class="view active">
    <!-- Header -->
    <header class="header">
      <div class="wrap">
        <div class="brand">
          <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDYiIGhlaWdodD0iNDYiIHZpZXdCb3g9IjAgMCA0NiA0NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ2IiBoZWlnaHQ9IjQ2IiByeD0iOCIgZmlsbD0idXJsKCNncmFkaWVudDApIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MCIgeDE9IjAiIHkxPSIwIiB4Mj0iNDYiIHkyPSI0NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjZjk3MzE2Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzhjNWNmNiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=" alt="Dukkan Vision">
          <span>ุฏูุงู ููุฌูู</span>
        </div>
        <div class="grow"></div>
        <div class="account">
          <div class="info">
            <div id="accName">ูุฑุญุจุงู</div>
            <div id="accEmail">โ</div>
            <button class="logout" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
          </div>
        </div>
        <div class="account-btn-container">
          <button class="account-btn" onclick="toggleAccountMenu()">ูุนูููุงุช ุงูุญุณุงุจ</button>
          
          <!-- Account Dropdown Menu -->
          <div class="account-dropdown" id="accountDropdown">
            <div class="dropdown-header">
              <div class="user-avatar">
                <div class="avatar-gradient"></div>
              </div>
              <div class="user-info">
                <div class="brand-name">ุฏูุงู ููุฌูู</div>
                <div class="user-name" id="dropdownName">ASSIEL O SARDIDI</div>
                <div class="user-email" id="dropdownEmail">assie55lsar@gmail.com</div>
              </div>
            </div>
            
            <div class="dropdown-content">
              <button class="dropdown-btn logout-btn" onclick="logout()">
                ุชุณุฌูู ุงูุฎุฑูุฌ
              </button>
              
              <div class="qr-section">
                <div class="qr-code" id="dropdownQR">
                  <!-- QR Code will be generated here -->
                </div>
                <div class="qr-label">QR Code</div>
              </div>
              
              <button class="dropdown-btn account-info-btn" onclick="showAccountInfo()">
                ูุนูููุงุช ุงูุญุณุงุจ
              </button>
            </div>
          </div>
        </div>
        
        <!-- ุงูุจุงุฑููุฏ ูู ุฃูุตู ุงููุณุงุฑ -->
        <div class="barcode-container" style="position: relative; display: inline-block; margin-left: 20px;">
          <div class="barcode-small" id="smallBarcode" style="
            width: 80px;
            height: 80px;
            background:
              linear-gradient(90deg, #000 1px, transparent 1px),
              linear-gradient(0deg, #000 1px, transparent 1px);
            background-size: 8px 8px;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
          " onclick="showBarcodePage()" title="ุงุถุบุท ูุนุฑุถ ุตูุญุฉ ูุญุงูุงุฉ ูุณุญ ุงูุจุงุฑููุฏ">
            <!-- QR Code Corners -->
            <div style="
              position: absolute;
              top: 8px;
              left: 8px;
              width: 16px;
              height: 16px;
              background: #000;
              border-radius: 3px;
            "></div>
            <div style="
              position: absolute;
              top: 8px;
              right: 8px;
              width: 16px;
              height: 16px;
              background: #000;
              border-radius: 3px;
            "></div>
            <div style="
              position: absolute;
              bottom: 8px;
              left: 8px;
              width: 16px;
              height: 16px;
              background: #000;
              border-radius: 3px;
            "></div>
            <!-- Center Logo -->
            <div style="
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              width: 8px;
              height: 8px;
              background: #000;
              border-radius: 50%;
            "></div>
            <!-- Data Points -->
            <div style="
              position: absolute;
              top: 32px;
              left: 32px;
              width: 2px;
              height: 2px;
              background: #000;
              border-radius: 1px;
            "></div>
            <div style="
              position: absolute;
              top: 40px;
              left: 40px;
              width: 2px;
              height: 2px;
              background: #000;
              border-radius: 1px;
            "></div>
            <div style="
              position: absolute;
              top: 48px;
              left: 32px;
              width: 2px;
              height: 2px;
              background: #000;
              border-radius: 1px;
            "></div>
            <div style="
              position: absolute;
              top: 32px;
              left: 48px;
              width: 2px;
              height: 2px;
              background: #000;
              border-radius: 1px;
            "></div>
            <!-- Data Points -->
            <div style="
              position: absolute;
              bottom: 5px;
              left: 50%;
              transform: translateX(-50%);
              background: rgba(255,255,255,0.9);
              color: #000;
              padding: 2px 4px;
              border-radius: 3px;
              font-size: 8px;
              font-weight: bold;
              white-space: nowrap;
            ">QR Code</div>
          </div>
          <div style="
            position: absolute;
            top: -30px;
            right: 0;
            background: #333;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
          " id="barcodeTooltip">ุงุถุบุท ูุนุฑุถ ุตูุญุฉ ูุญุงูุงุฉ ูุณุญ ุงูุจุงุฑููุฏ</div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <div class="wrap">
        <!-- Dashboard Content -->
        <div id="page-dashboard" class="page active">
          <div class="dashboard-grid">
            <!-- Left Column -->
            <div class="left-column">
              <!-- Data Summary Cards -->
              <div class="data-summary">
                <div class="summary-cards">
                  <div class="summary-card yellow">
                    <div class="card-content">
                      <div class="card-title">ุฅุฌูุงูู ุงููุตุฑูู</div>
                      <div class="card-value" id="kSpend">1560.34 ุฑ.ุณ</div>
                      <canvas id="sparkSpend" width="100" height="30"></canvas>
                    </div>
                  </div>
                  <div class="summary-card green">
                    <div class="card-content">
                      <div class="card-title">ุนุฏุฏ ุงูุฒูุงุฑุงุช</div>
                      <div class="card-value" id="kVisits">102</div>
                      <canvas id="sparkVisits" width="100" height="30"></canvas>
                    </div>
                  </div>
                  <div class="summary-card yellow">
                    <div class="card-content">
                      <div class="card-title">ุฃูุซุฑ ูุฑุน ุฒูุงุฑุฉ</div>
                      <div class="card-value" id="kTop">Twq Pick - ุงูุฑูุงุถ</div>
                      <canvas id="sparkTop" width="100" height="30"></canvas>
                    </div>
                  </div>
                  <div class="summary-card green">
                    <div class="card-content">
                      <div class="card-title">ูุชูุณุท ุงููุงุชูุฑุฉ</div>
                      <div class="card-value" id="kAvg">65.14 ุฑ.ุณ</div>
                      <canvas id="sparkAvg" width="100" height="30"></canvas>
                    </div>
                  </div>
                </div>
                <button class="btn btn-purple" onclick="updateData()">ุชุญุฏูุซ ุงูุจูุงูุงุช</button>
              </div>

              <!-- Map Section -->
              <div class="map-section">
                <div class="card">
                  <h3>ุฎุฑูุทุฉ ุงููุฑูุน - ุงูุณุนูุฏูุฉ</h3>
                  <div id="map" style="height: 400px; width: 100%; border-radius: 8px;"></div>
                </div>
              </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
              <!-- Virtual Assistant -->
              <div class="assistant-section">
                <div class="card">
                  <h3>ุงููุณุงุนุฏ ุงูุงูุชุฑุงุถู</h3>
                  <div class="assistant-greeting">ูุฑุญุจุงู .. ููู ุฃูุฏุฑ ุฃุฎุฏููุ</div>
                  <div class="chat-input">
                    <textarea placeholder="ุงุณุฃู ุนู ููุชุฌุ ูุงุชูุฑุฉ" id="chatInput" rows="4"></textarea>
                    <button class="btn btn-red" onclick="sendMessage()">ุฅุฑุณุงู</button>
                  </div>
                </div>
              </div>

              <!-- Invoices Section -->
              <div class="invoices-section">
                <div class="card">
                  <h3>ุงูููุงุชูุฑ</h3>
                  <div class="invoices-list" id="invoicesList">
                    <div class="invoice-item">
                      <div class="invoice-info">
                        <div class="invoice-id">#1028</div>
                        <div class="invoice-date">2025-08-03</div>
                      </div>
                      <div class="invoice-amount">31.40 ุฑ.ุณ</div>
                      <button class="btn btn-purple btn-sm">ุงุณุชุนุฑุงุถ</button>
                    </div>
                    <div class="invoice-item">
                      <div class="invoice-info">
                        <div class="invoice-id">#1019</div>
                        <div class="invoice-date">2025-07-22</div>
                      </div>
                      <div class="invoice-amount">15.90 ุฑ.ุณ</div>
                      <button class="btn btn-purple btn-sm">ุงุณุชุนุฑุงุถ</button>
                    </div>
                    <div class="invoice-item">
                      <div class="invoice-info">
                        <div class="invoice-id">#1007</div>
                        <div class="invoice-date">2025-07-03</div>
                      </div>
                      <div class="invoice-amount">31.50 ุฑ.ุณ</div>
                      <button class="btn btn-purple btn-sm">ุงุณุชุนุฑุงุถ</button>
                    </div>
                  </div>
                  <div class="invoices-link">
                    <a href="#" onclick="showSubpage('invoices')">ุฅุฏุงุฑุฉ ููุงุชูุฑู -</a>
                  </div>
                </div>
              </div>

              <!-- Product Search -->
              <div class="search-section">
                <div class="card">
                  <h3>ุงุจุญุซ ุนู ุชูุงูุฑ ุงูููุชุฌุงุช</h3>
                  <div class="search-input">
                    <input type="text" placeholder="ูุซุงู: ุญููุจ ูููู ุงูุฏุณู" id="productSearch">
                    <button class="btn btn-gradient" onclick="searchProducts()">ุจุญุซ</button>
                  </div>
                </div>
              </div>

              <!-- Contact Form -->
              <div class="contact-section">
                <div class="card">
                  <h3>ุชูุงุตู ูุนูุง</h3>
                  <form id="contactForm">
                    <input type="text" placeholder="ุงุณูู" id="contactName" required>
                    <input type="tel" placeholder="ุฑูู ุงูุฌูุงู" id="contactPhone" required>
                    <textarea placeholder="ุฑุณุงูุชู" id="contactMessage" rows="4" required></textarea>
                    <button type="submit" class="btn btn-gradient">ุงุฑุณุงู</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Barcode Page -->
        <div id="page-barcode" class="page">
          <div class="main">
            <div class="sidebar">
              <div class="card">
                <h3>ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู</h3>
                <ol>
                  <li>ุงูุชุญ ุจุงุฑููุฏ <strong>ุฏูุงู ููุฌูู</strong> ุนูุฏ ุงูุฏุฎูู.</li>
                  <li>ูุฌูู ุงูุจุงุฑููุฏ ุฅูู ุฌูุงุฒ ุงููุงุฑุฆ ุนูู ุงูุจูุงุจุฉ.</li>
                  <li>ุจุนุฏ ุงูุฅุฐู ุจุงูุฏุฎููุ ุงูุชูุท ูุฃุนุฏ ุงูููุชุฌุงุช ุจุญุฑููุฉ.</li>
                  <li>ุบุงุฏุฑ ุงููุชุฌุฑ โ ุงููุงุชูุฑุฉ ุชูุฑุณู ุฅูู ุจุฑูุฏู.</li>
                </ol>
                <button class="back" id="backDash">โก ุฑุฌูุน</button>
              </div>
              <div class="bar">
                <h4>ูุญุงูุงุฉ ุงููุณุญ</h4>
                <p class="helper">ูุฐุง ููุท ููุงุฎุชุจุงุฑ ุฏุงุฎู ุงููุงุฌูุฉ.</p>
                <button class="simulate" id="simulateScan">ูุญุงูุงุฉ ูุณุญ ุงูุจุงุฑููุฏ</button>
              </div>
            </div>
            <div class="content">
              <div class="card">
                <div id="qr" style="width:350px;height:350px;margin:0 auto;display:flex;align-items:center;justify-content:center;"></div>
                <h3 style="margin-top:0">ุจุงุฑููุฏ ุฏุฎูู ุงููุชุฌุฑ</h3>
                <div id="qrcode" style="width:100%;max-width:400px;margin:0 auto;text-align:center;">
                  <div style="margin-top: 15px; font-size: 14px; color: #666;">
                    QR Code - ุฏูุงู ููุฌูู
                  </div>
                </div>
                <div class="helper">ูุฐุง ุงูุฑูุฒ ูุนุจูุฑ ุนู ุฑูู ุฏุฎููู (ID).</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Barcode Scan Page -->
        <div id="page-barcode-scan" class="page">
          <div class="main">
            <div class="sidebar">
              <div class="card">
                <h3>ูุญุงูุงุฉ ูุณุญ ุงูุจุงุฑููุฏ</h3>
                <p class="helper">ูุฐู ุงูุตูุญุฉ ููุญุงูุงุฉ ุนูููุฉ ูุณุญ ุงูุจุงุฑููุฏ ูู ุงููุชุฌุฑ.</p>
                <button class="back" id="backToDashboard">โก ุฑุฌูุน</button>
              </div>
            </div>
            <div class="content">
              <div class="card">
                <h3 style="margin-top:0">ูุธุงู ูุณุญ ุงูุจุงุฑููุฏ</h3>
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; height: 500px;">
                  <!-- ุงูุจุงูู ุงูุฃููู - ูุงููุฑุง/ุณุชุฑููุฑ -->
                  <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <div style="width: 100%; height: 300px; background: #e9ecef; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                      <div style="text-align: center; color: #6c757d;">
                        <div style="font-size: 48px; margin-bottom: 10px;">๐ท</div>
                        <div>ูุงููุฑุง ุงููุดู ุนู ุงูููุชุฌุงุช</div>
                        <div style="font-size: 12px; margin-top: 5px;">ุณูุชู ุงุณุชุจุฏุงููุง ุจุณุชุฑููุฑ ุญูููู</div>
                      </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="simulateProductDetection()">ูุญุงูุงุฉ ุงูุชุดุงู ููุชุฌ</button>
                  </div>
                  
                  <!-- ุงูุจุงูู ุงูุฃูุณุฑ - ุงูุณูุฉ -->
                  <div style="background: #f8f9fa; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px;">๐ ุณูุฉ ุงููุดุชุฑูุงุช</h4>
                    <div id="cartItems" style="min-height: 200px; max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
                      <div style="text-align: center; color: #6c757d; padding: 20px;">
                        <div style="font-size: 24px; margin-bottom: 10px;">๐</div>
                        <div>ุงูุณูุฉ ูุงุฑุบุฉ</div>
                        <div style="font-size: 12px; margin-top: 5px;">ุณูุชู ุฅุถุงูุฉ ุงูููุชุฌุงุช ุชููุงุฆูุงู</div>
                      </div>
                    </div>
                    <div style="border-top: 1px solid #dee2e6; padding-top: 15px;">
                      <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <strong>ุงููุฌููุน:</strong>
                        <span id="cartTotal">0.00 ุฑ.ุณ</span>
                      </div>
                      <button class="btn btn-accent" style="width: 100%;" onclick="completePurchase()">ุฅุชูุงู ุงูุดุฑุงุก</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="wrap">
        <div class="footer-content">
          <div class="footer-copyright">
            2025 - ุฌููุน ุงูุญููู ูุญููุธุฉ.
          </div>
          <div class="footer-brand">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDYiIGhlaWdodD0iNDYiIHZpZXdCb3g9IjAgMCA0NiA0NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQ2IiBoZWlnaHQ9IjQ2IiByeD0iOCIgZmlsbD0idXJsKCNncmFkaWVudDApIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50MCIgeDE9IjAiIHkxPSIwIiB4Mj0iNDYiIHkyPSI0NiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjZjk3MzE2Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzhjNWNmNiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=" alt="Dukkan Vision">
            <span>ุฏูุงู ููุฌูู</span>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="js/user.js"></script>
</body>
</html> 